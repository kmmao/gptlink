var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(a,o,l)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[o]=l,s=(e,a)=>{for(var o in a||(a={}))t.call(a,o)&&r(e,o,a[o]);if(l)for(var o of l(a))n.call(a,o)&&r(e,o,a[o]);return e};import{c as i,f as p}from"./index.49b65bb1.js";import{u as c}from"./useBasicForm.76de7030.js";import{_ as d,a as m}from"./index.ae5bfbb0.js";import{t as u}from"./toolbarKeys.efa257c4.js";import{d as b,r as f,o as g,h as v,i as y,c as _,f as h,w,b as P,u as V,g as j,E as I,v as O,x as C}from"./vendor.b96c6562.js";const q=[{field:"channel",component:"Select",label:"支付配置",required:!0,componentProps:{options:[{label:"线下支付",value:"offline"},{label:"微信支付",value:"wechat"}]}},{field:"offline",component:"Input",label:"线下支付内容",required:!0,slot:"offline"}],U=[{field:"appid",component:"Input",label:"支付公众号AppId",required:!0,componentProps:{placeholder:"请输入公众号AppId"}},{field:"mch_id",component:"Input",label:"微信支付商户号",required:!0,componentProps:{placeholder:"请输入微信支付商户号(MCH_ID)"}},{field:"key",component:"Input",label:"微信支付密钥",required:!0,componentProps:{placeholder:"请输入微信支付密钥(API_KEY)"}}];const k={class:"cb-page open"},x=(e=>(O("data-v-bb401742"),e=e(),C(),e))((()=>P("div",{style:{"margin-bottom":"10px"}},[j("GPTLink密钥获取："),P("a",{href:"https://gpt-link.com",target:"_blank"},"点此前往")],-1))),A={class:"cb-m-b-40"},F={class:"cb-m-l-60"},K=j("确认");var R=d(b({__name:"pay",setup(e){const l=f("7"),t=f([{value:"7",name:"支付配置"},{value:"2",name:"微信支付"}]),{register:n,validate:r,setFieldsValue:d,resetFields:b,setProps:j}=c({options:{labelCol:{span:6},wrapperCol:{span:6}},schemas:q});g((()=>{R()}));const O=e=>{b();j({schemas:{7:q,2:U}[e]}),setTimeout((()=>{R()}),50)},C=async()=>{try{const e=await r(),a={type:l.value,config:s({},e)};e.agreement&&(a.config={agreements:s({},e)});const{err_code:o}=await m().open.openConfig(a);o||I.success("保存成功")}catch(e){}},R=async()=>{try{const{data:n}=await m().open.getConfig({type:l.value});"5"===l.value&&(n.config=(e=s({},n.config),t={admin_logo:n.config.admin_logo,web_logo:n.config.web_logo},a(e,o(t)))),d(s({},n.config))}catch(n){}var e,t},D=async e=>await E(e),E=e=>new Promise(((a,o)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=e=>{a(e.target.result)}}));return(e,a)=>{const o=v("el-card"),r=v("CbTab"),s=v("el-button");return y(),_("div",k,[h(o,null,{default:w((()=>[x])),_:1}),h(o,{class:"open-main"},{default:w((()=>[P("div",A,[h(r,{tabs:t.value,modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),onChange:O},null,8,["tabs","modelValue"])]),h(V(i),{onRegister:V(n)},{agreement:w((({model:e,field:a})=>[h(V(p),{modelValue:e[a],"onUpdate:modelValue":o=>e[a]=o},null,8,["modelValue","onUpdate:modelValue"])])),offline:w((({model:e,field:a})=>[h(V(p),{modelValue:e[a],"onUpdate:modelValue":o=>e[a]=o,useLibrary:!1,"http-request":D,toolbarKeys:V(u)},null,8,["modelValue","onUpdate:modelValue","toolbarKeys"])])),_:1},8,["onRegister"]),P("div",F,[h(s,{type:"primary",onClick:C},{default:w((()=>[K])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-bb401742"]]);export{R as default};
