var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,r=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&n(e,l,o[l]);if(a)for(var l of a(o))s.call(o,l)&&n(e,l,o[l]);return e};import{c as p,f as i}from"./index.49b65bb1.js";import{u as c}from"./useBasicForm.76de7030.js";import{d,r as u,o as m,h as f,i as b,c as g,f as _,w as v,b as y,u as h,ao as k,s as w,az as q,av as P,e as I,g as O,E as j,v as C,x as V}from"./vendor.b96c6562.js";import{_ as x,a as z}from"./index.ae5bfbb0.js";import{t as L}from"./toolbarKeys.efa257c4.js";const F=[{field:"account",component:"Input",label:"账号",required:!0,componentProps:{placeholder:"请输入账号"}},{field:"password",component:"Input",label:"密码",required:!0,componentProps:{placeholder:"请输入密码"}},{field:"sign",component:"Input",label:"签名",required:!0,componentProps:{placeholder:"请输入签名"}}],G=[{field:"key_type",component:"Select",label:"密钥类型",required:!0,defaultValue:"gptlink",componentProps:{options:[{label:"GPTLink",value:"gptlink"},{label:"OpenAI",value:"openai"}]}},{field:"secret_key",component:"Input",label:"API密钥",required:!0,componentProps:{placeholder:"请输入api密钥"}},{field:"login_type",component:"Select",label:"用户登陆方式",required:!0,defaultValue:"2",componentProps:{options:[{label:"用户名/密码登录",value:"1"},{label:"微信登陆",value:"2"},{label:"微信+手机号登陆",value:"4"}]}},{field:"name",component:"Input",label:"站点名称",required:!1,componentProps:{placeholder:"输入网址名称"}},{field:"icp",component:"Input",label:"网站底部icp备案号",required:!1,componentProps:{placeholder:"请输入icp备案号"}},{field:"web_logo",component:"Input",label:"用户端LOGO",required:!1,slot:"web_logo"},{field:"admin_logo",component:"Input",label:"管理端LOGO",required:!1,slot:"admin_logo"},{field:"user_logo",component:"Input",label:"用户默认头像",required:!1,slot:"user_logo"}],R=[{field:"title",component:"Input",label:"协议标题",required:!0,componentProps:{placeholder:"请输入协议标题"}},{field:"agreement",component:"Input",label:"协议内容",required:!0,slot:"agreement"}];const T={class:"cb-page"},U=(e=>(C("data-v-69c047c8"),e=e(),V(),e))((()=>y("div",{style:{"margin-bottom":"10px"}},[O("GPTLink密钥获取："),y("a",{href:"https://gpt-link.com",target:"_blank"},"点此前往")],-1))),A={class:"cb-m-b-40"},K={class:"open-upload cb-flex"},S=["src"],D={key:2,class:"open-upload-mask"},E={class:"open-upload cb-flex"},B=["src"],H={key:2,class:"open-upload-mask"},J={class:"open-upload cb-flex"},M=["src"],N={key:2,class:"open-upload-mask"},Q={class:"cb-m-l-60"},W=O("确认");var X=x(d({__name:"system",setup(e){const a=u("5"),t=u([{value:"5",name:"系统配置"},{value:"6",name:"协议配置"},{value:"4",name:"创蓝短信配置"}]),{register:s,validate:n,setFieldsValue:d,resetFields:O,setProps:C}=c({options:{labelCol:{span:6},wrapperCol:{span:6}},schemas:G});m((()=>{X()}));const V=e=>{O();C({schemas:{4:F,5:G,6:R}[e]}),setTimeout((()=>{X()}),50)},x=async()=>{try{const e=await n(),o={type:a.value,config:r({},e)},{err_code:l}=await z().open.openConfig(o);l||j.success("保存成功")}catch(e){}},X=async()=>{try{const{data:s}=await z().open.getConfig({type:a.value});"5"===a.value&&(s.config=(e=r({},s.config),t={admin_logo:s.config.admin_logo,web_logo:s.config.web_logo},o(e,l(t)))),d(r({},s.config))}catch(s){}var e,t},Y=async(e,o)=>{const l=await ee(e);d({[o]:l})},Z=async e=>await ee(e),$=e=>{d({[e]:""})},ee=e=>new Promise(((o,l)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=e=>{o(e.target.result)}}));return(e,o)=>{const l=f("el-card"),n=f("CbTab"),r=f("el-icon"),c=f("el-button");return b(),g("div",T,[_(l,null,{default:v((()=>[U])),_:1}),_(l,{class:"open-main"},{default:v((()=>[y("div",A,[_(n,{tabs:t.value,modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),onChange:V},null,8,["tabs","modelValue"])]),_(h(p),{onRegister:h(s)},{web_logo:v((({model:e,field:l})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>Y(e,"web_logo")},{default:v((()=>[y("div",K,[e[l]?(b(),g("img",{key:0,src:e[l],class:"open-upload-img"},null,8,S)):(b(),w(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(q))])),_:1})),e[l]?(b(),g("div",D,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:o[1]||(o[1]=e=>$("web_logo"))},{default:v((()=>[_(h(P))])),_:1})])):I("",!0)])])),_:2},1032,["http-request","before-upload"])])),admin_logo:v((({model:e,field:l})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>Y(e,"admin_logo")},{default:v((()=>[y("div",E,[e[l]?(b(),g("img",{key:0,src:e[l],class:"open-upload-img"},null,8,B)):(b(),w(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(q))])),_:1})),e[l]?(b(),g("div",H,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:o[2]||(o[2]=e=>$("admin_logo"))},{default:v((()=>[_(h(P))])),_:1})])):I("",!0)])])),_:2},1032,["http-request","before-upload"])])),user_logo:v((({model:e,field:l})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>Y(e,"user_logo")},{default:v((()=>[y("div",J,[e[l]?(b(),g("img",{key:0,src:e[l],class:"open-upload-img"},null,8,M)):(b(),w(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(q))])),_:1})),e[l]?(b(),g("div",N,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:o[3]||(o[3]=e=>$("user_logo"))},{default:v((()=>[_(h(P))])),_:1})])):I("",!0)])])),_:2},1032,["http-request","before-upload"])])),agreement:v((({model:e,field:o})=>[_(h(i),{modelValue:e[o],"onUpdate:modelValue":l=>e[o]=l,useLibrary:!1,"http-request":Z,toolbarKeys:h(L)},null,8,["modelValue","onUpdate:modelValue","toolbarKeys"])])),_:1},8,["onRegister"]),y("div",Q,[_(c,{type:"primary",onClick:x},{default:v((()=>[W])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-69c047c8"]]);export{X as default};
